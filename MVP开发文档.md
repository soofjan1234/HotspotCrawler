# 热点爬虫系统 - MVP开发文档

## 1. MVP概述

### 1.1 MVP目标
MVP（最小可行产品）阶段的核心目标是快速实现系统的核心功能，验证业务价值并获取用户反馈，为后续迭代开发提供依据。

### 1.2 MVP范围界定
在MVP阶段，我们将优先实现以下核心功能，确保系统能够完成基本的热点内容爬取、存储和展示流程：

- 从2-3个核心平台爬取热点内容
- 基本的数据存储功能
- 简易的HTML操作界面
- 基础的日志记录功能

## 2. 开发优先级与阶段规划

### 2.1 功能优先级矩阵

| 功能模块 | 优先级 | 开发阶段 | 验收标准 |
|---------|--------|---------|----------|
| 基础爬虫框架 | P0 | 第一阶段 | 成功爬取单个平台今日头条内容 |
| 简易HTML界面 | P0 | 第一阶段 | 界面可正常访问，按钮可点击触发操作 |
| 基础存储功能 | P1 | 第二阶段 | 成功存储爬取内容到指定目录 |
| 多平台爬取支持 | P1 | 第二阶段 | 成功从5个平台爬取内容 |
| 日志记录功能 | P1 | 第二阶段 | 日志显示操作状态和存储路径信息 |
| 定时任务功能 | P2 | 第三阶段 | 系统可按设定时间自动运行 |
| AI文案生成功能 | P2 | 后续迭代 | 生成基础文案内容 |

## 3. 技术架构设计

### 3.1 技术选型

| 技术/框架 | 用途 | 选型理由 |
|----------|------|----------|
| Python 3.x | 核心开发语言 | 丰富的爬虫库支持，生态成熟 |
| Beautiful Soup / Scrapy | 网页解析 | 强大的HTML解析能力，适合内容提取 |
| Flask | Web框架 | 轻量级，适合快速开发简易界面 |
| SQLite | 临时数据存储 | 轻量级，无需额外数据库服务 |
| APScheduler | 定时任务 | 简单易用，适合Python环境 |

### 3.2 系统架构图

```
+----------------+      +----------------+      +----------------+
| 简易HTML界面    | ---> | 控制中心       | ---> | 爬虫模块       |
+----------------+      +----------------+      +----------------+
         ^                      |                       |
         |                      v                       v
         |               +----------------+      +----------------+
         +---------------+ 日志模块       |      | 数据存储模块   |
                         +----------------+      +----------------+
```

## 4. 核心模块设计

### 4.1 爬虫模块

#### 4.1.1 功能描述
实现对目标平台内容的抓取，包括文章标题、内容、图片等信息。

#### 4.1.2 设计要点
- 采用模块化设计，为每个平台创建独立的爬虫类
- 实现基础的反爬机制（请求头设置、访问间隔控制等）
- 支持随机选择热点内容的功能
- 错误处理和重试机制

#### 4.1.3 MVP阶段支持的平台
- 今日头条（首选）
- 新浪新闻（次选）
- 抖音（视技术难度决定是否在MVP阶段实现）

### 4.2 数据存储模块

#### 4.2.1 功能描述
负责将爬取的内容按指定结构进行存储和管理。

#### 4.2.2 设计要点
- 按照标题创建唯一目录
- 区分存储文章、图片等不同类型内容
- 文件命名规则统一，避免冲突
- 基础的存储空间管理

### 4.3 HTML界面模块

#### 4.3.1 功能描述
提供简单的用户操作界面，支持触发爬取任务和查看日志。

#### 4.3.2 设计要点
- 单页面应用，简洁直观
- 主要组件：运行按钮、日志显示区域
- 响应式设计，适配不同设备
- 实时更新日志信息

### 4.4 日志模块

#### 4.4.1 功能描述
记录系统运行状态、操作过程和结果信息。

#### 4.4.2 设计要点
- 记录关键操作步骤
- 显示爬取内容标题和存储路径
- 错误信息的清晰展示
- 日志分级（信息、警告、错误）

## 5. 数据流程设计

### 5.1 内容爬取流程
1. 用户通过HTML界面点击运行按钮或系统定时触发
2. 控制中心接收到请求，初始化爬虫模块
3. 爬虫模块随机选择目标平台
4. 获取平台热点内容列表
5. 随机选择指定数量的热点内容进行详细爬取
6. 将爬取结果传递给数据存储模块

### 5.2 数据存储流程
1. 接收爬虫模块传递的内容数据
2. 根据内容标题创建唯一目录
3. 在目录下创建子文件夹（原文章、图片、视频）
4. 将不同类型的内容存储到对应文件夹
5. 返回存储路径信息给日志模块

### 5.3 界面交互流程
1. 用户打开HTML界面
2. 点击运行按钮
3. 前端发送请求到后端
4. 后端执行爬取任务
5. 实时将日志信息传回前端显示
6. 任务完成后显示统计信息

## 6. 测试策略

### 6.1 单元测试
- 各核心模块的功能测试
- 异常情况处理测试
- 边界条件测试

### 6.2 集成测试
- 模块间数据流转测试
- 完整爬取流程测试
- 界面交互测试

### 6.3 验收标准
- 成功从至少2个平台各爬取内容
- 内容正确存储到指定目录
- HTML界面操作正常，日志显示完整
- 系统运行稳定，无严重错误

## 7. 部署与交付计划

### 7.1 部署要求
- Python 3.8+环境
- 必要的依赖库安装
- 基础的文件系统权限

### 7.2 部署步骤
1. 安装Python运行环境
2. 安装项目依赖
3. 配置必要的环境变量
4. 启动Web服务

### 7.3 交付物
1. 完整的源代码
2. 依赖清单（requirements.txt）
3. 部署和配置文档
4. 简易用户操作说明

## 8. 后续迭代规划

1. 重试机制。有时因为网络问题可能爬文章失败，所以可以尝试再试一次

---

本MVP开发文档专注于快速实现核心功能，验证业务价值。在MVP完成后，将根据实际使用情况和用户反馈进行调整和扩展。